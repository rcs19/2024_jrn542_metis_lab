# MCF Lab: METIS
### [GitHub Repository Link](https://github.com/rcs19/2024_jrn542_metis_lab)

We have control over four parameters,
- PNBI Power Neutral Beam Injection 
- $B_T$ toroidal field
- $T_P$ plasma current (poloidal field)
- $\bar{n}$

and our end goal is to figure out the triple product, $n_iT_i\tau_e$. 

The dependent variables we are interested in are $n_i$, $T_i$ and $\tau_e$. Other variables we may be interested in is the safety factor, plasma $\beta$, mode-H.

## Scripts
### processing.py
- Original python script provided in Data Lab VLE. Has been edited to pass `datafile` as a function argument instead of using a global variable `full_dataset`.
- Contains functions that read the data files.
- Main function we're interested in is `get_average`.

### main.py 
- This iterates through data files in a specified folder and stores specified variables into a pandas dataframe. Standard deviation is also recorded in this dataframe.
- The ion density `ni0` and triple product `tripleprod` is calculated from the averages (standard deviation is propagated). This dataframe is exported as a `.csv`.

### plot.py
- Uses .csv file generated by main.py to create a stacked plot of chosen variables (with measured `PNBI` in the x-axis).

## Notes
- Set NBI 2 multiplier = 0
- My team run with 1T
- P{MW}B{TT}I{MA}N{10^{19} m^{-3}}.mat

- Can't operate for more than 5 seconds otherwise current will cause melting of solenoid.
- Decrease in density? 
    - Particles being input (PNBI) aren't being considered in ni0. We should ask, what does it meaan to increase PNBI? Is it N of particles, energy of particles? 
    - More fusion so density should decrease?
- Why does confinement time go up?
    - Steeper gradient from centre to walls.
- You are producing graphs because you have questions to answer. 
- 3.5 NBPI output power registers as 0 as investigated by Emir -> no heating whatsoever.     

### 06/12/2024

- Peak in tripleproduct is the change from L-mode to H-mode. We don't see the peak in our graph because B is too low (1T) and we're actually already in H-mode. 
- ICRH (ion cyclotron resonance heating) is the rest of the power (neutral beam injection). Spike is happening around 0, decrease ICRH. ICHR injects microwave radiation which should be resonant with the particles for heating.
- The short plataeu bump as investigated by Conor is due to a slight change in magnetic field. 